<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{/layout/layout.html}">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<div layout:fragment="content">
    <h5 th:if="${parentCategory != null}">
        <a th:href="@{'/product/{categoryId}/list.do'(categoryId=${parentCategory.categoryId})}"
           th:text="${parentCategory.cname}"></a>
    </h5>
    <h1 th:text="${category.cname}"></h1>
    <ul th:if="${childList != null and !childList.isEmpty()}">
        <li th:if="${realCategoryId.length() > 1}">
            <a th:if="${realCategoryId.equals(category.categoryId)}"
               th:href="@{'/product/{categoryId}/list.do'(categoryId=${category.categoryId})}"
               style="font-weight:bold;">전체</a>
            <a th:unless="${realCategoryId.equals(category.categoryId)}"
               th:href="@{'/product/{categoryId}/list.do'(categoryId=${category.categoryId})}">전체</a>
        </li>
        <li th:each="child:${childList}">
            <a th:href="@{'/product/{categoryId}/list.do'(categoryId=${child.categoryId})}"
               th:text="${child.cname}" style="font-weight:bold;"
               th:if="${realCategoryId.equals(child.categoryId)}"></a>
            <a th:href="@{'/product/{categoryId}/list.do'(categoryId=${child.categoryId})}"
               th:text="${child.cname}" th:unless="${realCategoryId.equals(child.categoryId)}"></a>
        </li>
    </ul>
    <div class="container">
        <div class="row row-cols-1 row-cols-md-2 g-4 d-flex justify-content-between mb-5" >
            <div class="col mb-3" style="width: 240px;height: 300px;" th:each="product:${productList}">
                <a th:href="@{'/product/{productCode}/detail.do'(productCode=${product.productCode})}" style="text-decoration: none; color: black">
                    <img th:src="@{'/img/product/{imgPath}'(imgPath=${product.imageList[0].getImgPath()})}"
                         class="card-img-top rounded mb-3">
                    <div>
                        <p class="mb-2" th:text="${product.avgRate}"></p>
                        <p class="mb-2" th:text="${product.pname}"></p>
                        <p class="card-text mt-1" th:text="${product.salesPc}+'원'"></p>
                    </div>
                </a>
            </div>
        </div>
    </div>
    <th:block th:include="~{pagination}"></th:block>
</div>
</html>