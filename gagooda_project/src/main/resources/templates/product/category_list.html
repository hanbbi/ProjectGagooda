<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{/layout/layout.html}">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<div layout:fragment="content">
    <h5 th:if="${parentCategory != null}">
        <a th:href="@{'/product/{categoryId}/list.do'(categoryId=${parentCategory.categoryId})}"
           th:text="${parentCategory.cname}"></a>
    </h5>
    <h1 th:text="${category.cname}"></h1>
    <ul th:if="${childList != null and !childList.isEmpty()}">
        <li th:if="${realCategoryId.length() > 1}">
            <a th:if="${realCategoryId.equals(category.categoryId)}"
               th:href="@{'/product/{categoryId}/list.do'(categoryId=${category.categoryId})}"
               style="font-weight:bold;">전체</a>
            <a th:unless="${realCategoryId.equals(category.categoryId)}"
               th:href="@{'/product/{categoryId}/list.do'(categoryId=${category.categoryId})}">전체</a>
        </li>
        <li th:each="child:${childList}">
            <a th:href="@{'/product/{categoryId}/list.do'(categoryId=${child.categoryId})}"
               th:text="${child.cname}" style="font-weight:bold;"
               th:if="${realCategoryId.equals(child.categoryId)}"></a>
            <a th:href="@{'/product/{categoryId}/list.do'(categoryId=${child.categoryId})}"
               th:text="${child.cname}" th:unless="${realCategoryId.equals(child.categoryId)}"></a>
        </li>
    </ul>
    <th:block th:each="product:${productList}">
        <a th:href="@{'/product/{productCode}/detail.do'(productCode=${product.getProductCode()})}">
            <div>
                <img th:src="@{'/img/product/{file}'(file=${product.imageList[0].imgPath})}"
                     style="width: 200px; height: 200px; object-fit: cover;">
            </div>
            <p th:text="${product.getProductCode()}"></p>
            <p th:text="${product.getPname()}"></p>
            <p th:text="${product.getSalesPc()}"></p>
        </a>
    </th:block>
    <th:block th:include="~{pagination}"></th:block>
</div>
</html>